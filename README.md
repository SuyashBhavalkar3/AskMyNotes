# AskMyNotes

This repository contains the backend API for the AskMyNotes application. The service is built with FastAPI and provides user authentication as well as a user profile feature where each user can store three subject names.

## Available endpoints

### Authentication
- `POST /auth/register` – register a new user (name, email, password).
- `POST /auth/login` – obtain a JWT token by providing email and password.
- `GET /auth/me` – retrieve information about the currently authenticated user.

### Profile
- `POST /profile/` – create or update the current user's profile. The payload must include exactly three subjects:
  ```json
  {
      "subject1": "Mathematics",
      "subject2": "Physics",
      "subject3": "Chemistry"
  }
  ```
- `GET /profile/` – fetch the current user's profile (requires valid JWT in Authorization header).

API documentation is automatically generated by FastAPI and available at `/docs` when the server is running.

> **Embedding dimension:** the system uses a 1536‑dimensional embedding
> vector by default (matching OpenAI's `text-embedding-3-small`).
> You can override it with the `EMBEDDING_DIM` environment variable, but
> make sure it matches the model you configure via `OPENAI_EMBEDDING_MODEL`.
The project now uses the OpenAI Python SDK to generate embeddings by
default when an `OPENAI_API_KEY` is present. It is currently **locked to the
`text-embedding-3-small`** model (1536‑dimensional); any attempt to change
the model via `OPENAI_EMBEDDING_MODEL` will raise an error. During local
development the code will fall back to a deterministic mock provider if the
key is missing. Set `OPENAI_API_KEY` in your environment before starting the
app for real embeddings. You can verify which provider/model is active by
watching the application log during startup; the server logs an informative
message once it finishes booting.

> **Note:** The document ingestion endpoints depend on a reachable Qdrant
> vector database. You can either:
> 
> * **Run locally** using Docker (`docker run -p 6333:6333 qdrant/qdrant`).
> * **Use a managed cluster** – set `QDRANT_URL` to the full HTTPS endpoint and
>   `QDRANT_API_KEY` to the provided API key.
> 
> The legacy `QDRANT_HOST`/`QDRANT_PORT` settings remain supported for simple
> local deployments. If the application cannot connect to Qdrant, upload/query
> calls will return a 503 Service Unavailable with an explanatory message. 
